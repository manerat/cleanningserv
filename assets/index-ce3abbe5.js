import{r as c,_ as z,j as e,a as i,F as U}from"./index-7c8debbd.js";import{S as R,D as Y,d as _,T as F}from"./index-fcf321fc.js";import{A as X}from"./API-9c56ebf9.js";import{F as l,D as B,B as S}from"./index-04b6eb93.js";import{A as Z,R as w,C as T,a as I,T as u,S as g}from"./index-a303e74a.js";import{R as y}from"./index-c7f6972d.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};const te=ee;var $=function(b,C){return c.createElement(Z,z(z({},b),{},{ref:C,icon:te}))};$.displayName="MinusCircleOutlined";const ne=c.forwardRef($),oe=()=>{const[f]=l.useForm(),[b,C]=c.useState([]),[j,E]=c.useState([]),[m,L]=c.useState([]),[N,V]=c.useState("1"),[A,q]=c.useState(0),[v,G]=c.useState(),[M,J]=c.useState("1");c.useEffect(()=>{X.get("getData").then(t=>{var h,o,p,H,W,O;const n=(o=(h=t==null?void 0:t.data)==null?void 0:h.data)==null?void 0:o.filter(s=>!s._id),a=n==null?void 0:n.map(s=>({label:s.service,value:s.id,type:s.order_type})),r=(H=(p=t==null?void 0:t.data)==null?void 0:p.masterArea)==null?void 0:H.map(s=>({label:s.area_size,value:s.id})),d=(O=(W=t==null?void 0:t.data)==null?void 0:W.masterPromotion)==null?void 0:O.map(s=>({label:s.name_promotion,value:s.id}));E(r),L(n),C(a),G(d)})},[]);const P=(t,n)=>{const a=m==null?void 0:m.filter(r=>r.area_size.includes(n.label)).map(r=>({label:r.service,value:r.id,type:r.order_type}));C(a)},K=t=>{V(t.target.value)},D=t=>{const n=m==null?void 0:m.find(a=>a.id===t);f.setFieldValue("price",n==null?void 0:n.price),q(n==null?void 0:n.price)},Q=t=>{J(t.target.value)},[x,k]=c.useState("ครั้งเดียว");return e(w,{style:{display:"flex",alignItems:"center",justifyItems:"center",justifyContent:"center",minHeight:"100vh"},children:e(T,{xl:8,md:12,children:i(I,{bordered:!0,style:{minHeight:"50em"},children:[i("div",{style:{display:"flex",justifyItems:"center",justifyContent:"center",flexDirection:"column",width:"100%"},children:[e(u.Paragraph,{style:{textAlign:"center",fontSize:"2em"},children:"จองบริการ"}),e(u.Paragraph,{style:{textAlign:"center"},children:"(เลื่อนลงเพื่อดูขอบเขตการให้บริการ)"})]}),e(u.Paragraph,{style:{fontWeight:"bold"},children:"คุณต้องการทำความสะอาดบ่อยแค่ไหน"}),i(w,{gutter:[2,2],style:{marginBottom:"2em"},children:[e(T,{span:12,children:e(I,{onClick:()=>k("ครั้งเดียว"),className:`${x===1&&"active"} select-promotion`,style:{display:"flex",justifyContent:"center",justifyItems:"center",alignItems:"center"},children:"พื้นฐาน"})}),e(T,{span:12,children:e(I,{onClick:()=>k("จองแบบหลายวัน"),className:`${x===2&&"active"} select-promotion`,style:{display:"flex",justifyContent:"center",justifyItems:"center",alignItems:"center"},children:"แพ็กเกจ"})})]}),x==="ครั้งเดียว"?i(l,{layout:"vertical",size:"large",form:f,children:[e(l.Item,{label:"กรุณาเลือกประเภทที่พัก เพื่อให้เราช่วยคุณประเมินระยะเวลาทำความสะอาด และค่าบริการ",style:{fontWeight:"bold"},children:e(g,{options:j,onChange:P})}),e(l.Item,{label:"บริการ (ชั่วโมง)",style:{fontWeight:"bold"},children:e(g,{options:b,onChange:D})}),e(l.Item,{label:e("b",{children:"เลือกประเภทการจอง"}),children:i(y.Group,{onChange:K,defaultValue:"1",children:[e(y,{value:"1",children:"จองแบบเลือกวันและเวลาทันที"}),e(y,{value:"2",children:"จองแบบยังไม่ระบุวันและเวลา"})]})}),N==="1"&&e(l.Item,{label:"คุณต้องการใช้บริการนี้เมื่อไหร่",style:{fontWeight:"bold"},children:i(R,{children:[e(Y,{format:"DD-MM-YYYY",disabledDate:t=>t&&t<_().subtract(1,"day").endOf("day")}),e(F,{disabledTime:t=>({disabledHours:()=>{const n=[];for(let a=0;a<t.hour();a+=1)n.push(a);return n},disabledMinutes:n=>{const a=[];if(n===t.hour())for(let r=0;r<t.minute();r+=1)a.push(r);return a}})})]})}),e(B,{}),e(l.Item,{name:"price",children:i("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(u.Paragraph,{style:{textAlign:"left",fontWeight:"bold"},children:"ค่าบริการ (ยังไม่รวมภาษี)"}),e(u.Paragraph,{style:{textAlign:"right"},children:A.toLocaleString("th-TH",{style:"currency",currency:"THB"})})]})}),e(S,{type:"primary",block:!0,children:"ถัดไป"})]}):i(l,{layout:"vertical",size:"large",form:f,children:[M==="1"&&e(I,{title:"โปรโมชันแพ็กเกจ",children:e("ul",{children:v==null?void 0:v.map(t=>e("li",{children:t.label}))})}),e("br",{}),e(l.Item,{label:"กรุณาเลือกประเภทที่พัก เพื่อให้เราช่วยคุณประเมินระยะเวลาทำความสะอาด และค่าบริการ",style:{fontWeight:"bold"},children:e(g,{options:j,onChange:P})}),e(l.Item,{label:"บริการ (ชั่วโมง)",style:{fontWeight:"bold"},children:e(g,{options:b,onChange:D})}),e(l.Item,{label:e("b",{children:"เลือกประเภทการจอง"}),children:i(y.Group,{onChange:Q,defaultValue:"1",children:[e(y,{value:"1",children:"จองแบบเลือกวันและเวลาทันที"}),e(y,{value:"2",children:"จองแบบยังไม่ระบุวันและเวลา"})]})}),M==="1"?e(l.List,{name:"dates",label:"คุณต้องการใช้บริการนี้เมื่อไหร่",children:(t,{add:n,remove:a})=>i(U,{children:[t.map(r=>i(R,{align:"baseline",children:[e(l.Item,{style:{fontWeight:"bold"},...r,label:"วันที่",name:[r.name,"date"],rules:[{required:!0,message:"กรุณาเลือกวันที่"}],children:e(Y,{format:"DD-MM-YYYY",disabledDate:d=>d&&d<_().subtract(1,"day").endOf("day")})}),e(l.Item,{style:{fontWeight:"bold"},...r,label:"เวลา",name:[r.name,"time"],rules:[{required:!0,message:"กรุณาเลือกเวลา"}],children:e(F,{disabledTime:d=>({disabledHours:()=>{const h=[];for(let o=0;o<d.hour();o+=1)h.push(o);return h},disabledMinutes:h=>{const o=[];if(h===d.hour())for(let p=0;p<d.minute();p+=1)o.push(p);return o}})})}),e(ne,{onClick:()=>a(r.name)})]},r.key)),e(l.Item,{children:e(S,{type:"dashed",onClick:()=>n(),block:!0,children:"เลือกวันที่และเวลา"})})]})}):e(l.Item,{label:"จำนวนแพ็กเกจที่คุณต้องการ",children:e(g,{options:v})}),e(B,{}),e(l.Item,{name:"price",children:i("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(u.Paragraph,{style:{textAlign:"left",fontWeight:"bold"},children:"ค่าบริการ (ยังไม่รวมภาษี)"}),e(u.Paragraph,{style:{textAlign:"right"},children:A.toLocaleString("th-TH",{style:"currency",currency:"THB"})})]})}),e(S,{type:"primary",block:!0,children:"ถัดไป"})]})]})})})};export{oe as default};
